{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mithilproof/Oleic/react-dep/simon-says/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mithilproof/Oleic/react-dep/simon-says/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import sleep from\"../utils/sleep\";import getRandomId from\"../utils/get-random-id\";import createAction from\"../utils/create-action\";import{SONG_DELAY_TIME,REDUCED_DELAY_TIME}from\"../constants\";export var START_GAME=\"START_GAME\";export var START_SONG=\"START_SONG\";export var FINISH_SONG=\"FINISH_SONG\";export var LIGHTEN_PAD=\"LIGHTEN_PAD\";export var LIGHTEN_OFF_PAD=\"LIGHTEN_OFF_PAD\";export var GUESS_COLOR=\"GUESS_COLOR\";export var NEXT_LEVEL=\"NEXT_LEVEL\";var start=createAction(START_GAME);var next=createAction(NEXT_LEVEL);var startGame=function startGame(payload){return start({next:getRandomId()});};var nextLevel=function nextLevel(payload){return next({next:getRandomId()});};var guessColor=createAction(GUESS_COLOR);var startSong=createAction(START_SONG);var finishSong=createAction(FINISH_SONG);var lightenPad=createAction(LIGHTEN_PAD);var lightenOffPad=createAction(LIGHTEN_OFF_PAD);var sing=function sing(payload){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,match,i,id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch(startSong());_getState=getState(),match=_getState.match;i=0;case 4:if(!(i<=match.all.length-1)){_context.next=15;break;}id=match.all[i];dispatch(lightenPad({id:id}));_context.next=9;return sleep(SONG_DELAY_TIME);case 9:dispatch(lightenOffPad());_context.next=12;return sleep(SONG_DELAY_TIME);case 12:i++;_context.next=4;break;case 15:dispatch(finishSong());_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 21:case\"end\":return _context.stop();}}},_callee,null,[[0,18]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};var guess=function guess(_ref2){var succeeded=_ref2.succeeded,id=_ref2.id;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState2,match,all,guessed,done;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch(guessColor({succeeded:succeeded,id:id}));dispatch(startSong());dispatch(lightenPad({id:id}));_context2.next=6;return sleep(REDUCED_DELAY_TIME);case 6:dispatch(lightenOffPad());_context2.next=9;return sleep(REDUCED_DELAY_TIME);case 9:dispatch(finishSong());_getState2=getState(),match=_getState2.match;all=match.all,guessed=match.guessed;done=all.length===guessed.length&&succeeded;return _context2.abrupt(\"return\",new Promise(function(r){return r({done:done});}));case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[0,16]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export var actionCreators={startSong:startSong,startGame:startGame,finishSong:finishSong,lightenPad:lightenPad,lightenOffPad:lightenOffPad,nextLevel:nextLevel,guessColor:guessColor,guess:guess,sing:sing};","map":{"version":3,"sources":["/Users/mithilproof/Oleic/react-dep/simon-says/src/actions/game.js"],"names":["sleep","getRandomId","createAction","SONG_DELAY_TIME","REDUCED_DELAY_TIME","START_GAME","START_SONG","FINISH_SONG","LIGHTEN_PAD","LIGHTEN_OFF_PAD","GUESS_COLOR","NEXT_LEVEL","start","next","startGame","payload","nextLevel","guessColor","startSong","finishSong","lightenPad","lightenOffPad","sing","dispatch","getState","match","i","all","length","id","console","error","guess","succeeded","guessed","done","Promise","r","actionCreators"],"mappings":"qUAAA,MAAOA,CAAAA,KAAP,KAAkB,gBAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,wBAAzB,CACA,OAASC,eAAT,CAA0BC,kBAA1B,KAAoD,cAApD,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,YAAnB,CACP,MAAO,IAAMC,CAAAA,UAAU,CAAG,YAAnB,CACP,MAAO,IAAMC,CAAAA,WAAW,CAAG,aAApB,CACP,MAAO,IAAMC,CAAAA,WAAW,CAAG,aAApB,CACP,MAAO,IAAMC,CAAAA,eAAe,CAAG,iBAAxB,CACP,MAAO,IAAMC,CAAAA,WAAW,CAAG,aAApB,CACP,MAAO,IAAMC,CAAAA,UAAU,CAAG,YAAnB,CAEP,GAAMC,CAAAA,KAAK,CAAGV,YAAY,CAACG,UAAD,CAA1B,CACA,GAAMQ,CAAAA,IAAI,CAAGX,YAAY,CAACS,UAAD,CAAzB,CAEA,GAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,OAAD,QAAaH,CAAAA,KAAK,CAAC,CAAEC,IAAI,CAAEZ,WAAW,EAAnB,CAAD,CAAlB,EAAlB,CACA,GAAMe,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACD,OAAD,QAAaF,CAAAA,IAAI,CAAC,CAAEA,IAAI,CAAEZ,WAAW,EAAnB,CAAD,CAAjB,EAAlB,CAEA,GAAMgB,CAAAA,UAAU,CAAGf,YAAY,CAACQ,WAAD,CAA/B,CACA,GAAMQ,CAAAA,SAAS,CAAGhB,YAAY,CAACI,UAAD,CAA9B,CACA,GAAMa,CAAAA,UAAU,CAAGjB,YAAY,CAACK,WAAD,CAA/B,CACA,GAAMa,CAAAA,UAAU,CAAGlB,YAAY,CAACM,WAAD,CAA/B,CACA,GAAMa,CAAAA,aAAa,CAAGnB,YAAY,CAACO,eAAD,CAAlC,CAEA,GAAMa,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACP,OAAD,iGAAa,iBAAOQ,QAAP,CAAiBC,QAAjB,2JAEtBD,QAAQ,CAACL,SAAS,EAAV,CAAR,CAFsB,UAGJM,QAAQ,EAHJ,CAGdC,KAHc,WAGdA,KAHc,CAIbC,CAJa,CAIT,CAJS,aAINA,CAAC,EAAID,KAAK,CAACE,GAAN,CAAUC,MAAV,CAAmB,CAJlB,2BAKdC,EALc,CAKTJ,KAAK,CAACE,GAAN,CAAUD,CAAV,CALS,CAMpBH,QAAQ,CAACH,UAAU,CAAC,CAAES,EAAE,CAAFA,EAAF,CAAD,CAAX,CAAR,CANoB,sBAOd7B,CAAAA,KAAK,CAACG,eAAD,CAPS,QAQpBoB,QAAQ,CAACF,aAAa,EAAd,CAAR,CARoB,uBASdrB,CAAAA,KAAK,CAACG,eAAD,CATS,SAIqBuB,CAAC,EAJtB,+BAYtBH,QAAQ,CAACJ,UAAU,EAAX,CAAR,CAZsB,iFActBW,OAAO,CAACC,KAAR,cAdsB,qEAAb,oEAAb,CAkBA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,WAAGC,CAAAA,SAAH,OAAGA,SAAH,CAAcJ,EAAd,OAAcA,EAAd,iGAAuB,kBAAON,QAAP,CAAiBC,QAAjB,6KAEjCD,QAAQ,CAACN,UAAU,CAAC,CAAEgB,SAAS,CAATA,SAAF,CAAaJ,EAAE,CAAFA,EAAb,CAAD,CAAX,CAAR,CACAN,QAAQ,CAACL,SAAS,EAAV,CAAR,CACAK,QAAQ,CAACH,UAAU,CAAC,CAAES,EAAE,CAAFA,EAAF,CAAD,CAAX,CAAR,CAJiC,uBAK3B7B,CAAAA,KAAK,CAACI,kBAAD,CALsB,QAMjCmB,QAAQ,CAACF,aAAa,EAAd,CAAR,CANiC,uBAO3BrB,CAAAA,KAAK,CAACI,kBAAD,CAPsB,QAQjCmB,QAAQ,CAACJ,UAAU,EAAX,CAAR,CARiC,WAUfK,QAAQ,EAVO,CAUzBC,KAVyB,YAUzBA,KAVyB,CAWzBE,GAXyB,CAWRF,KAXQ,CAWzBE,GAXyB,CAWpBO,OAXoB,CAWRT,KAXQ,CAWpBS,OAXoB,CAY3BC,IAZ2B,CAYpBR,GAAG,CAACC,MAAJ,GAAeM,OAAO,CAACN,MAAvB,EAAiCK,SAZb,kCAc1B,GAAIG,CAAAA,OAAJ,CAAY,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAAC,CAAEF,IAAI,CAAJA,IAAF,CAAD,CAAR,EAAZ,CAd0B,+DAgBjCL,OAAO,CAACC,KAAR,eAhBiC,uEAAvB,sEAAd,CAoBA,MAAO,IAAMO,CAAAA,cAAc,CAAG,CAC5BpB,SAAS,CAATA,SAD4B,CAE5BJ,SAAS,CAATA,SAF4B,CAG5BK,UAAU,CAAVA,UAH4B,CAI5BC,UAAU,CAAVA,UAJ4B,CAK5BC,aAAa,CAAbA,aAL4B,CAM5BL,SAAS,CAATA,SAN4B,CAO5BC,UAAU,CAAVA,UAP4B,CAQ5Be,KAAK,CAALA,KAR4B,CAS5BV,IAAI,CAAJA,IAT4B,CAAvB","sourcesContent":["import sleep from \"../utils/sleep\";\nimport getRandomId from \"../utils/get-random-id\";\nimport createAction from \"../utils/create-action\";\nimport { SONG_DELAY_TIME, REDUCED_DELAY_TIME } from \"../constants\";\n\nexport const START_GAME = \"START_GAME\";\nexport const START_SONG = \"START_SONG\";\nexport const FINISH_SONG = \"FINISH_SONG\";\nexport const LIGHTEN_PAD = \"LIGHTEN_PAD\";\nexport const LIGHTEN_OFF_PAD = \"LIGHTEN_OFF_PAD\";\nexport const GUESS_COLOR = \"GUESS_COLOR\";\nexport const NEXT_LEVEL = \"NEXT_LEVEL\";\n\nconst start = createAction(START_GAME);\nconst next = createAction(NEXT_LEVEL);\n\nconst startGame = (payload) => start({ next: getRandomId() });\nconst nextLevel = (payload) => next({ next: getRandomId() });\n\nconst guessColor = createAction(GUESS_COLOR);\nconst startSong = createAction(START_SONG);\nconst finishSong = createAction(FINISH_SONG);\nconst lightenPad = createAction(LIGHTEN_PAD);\nconst lightenOffPad = createAction(LIGHTEN_OFF_PAD);\n\nconst sing = (payload) => async (dispatch, getState) => {\n  try {\n    dispatch(startSong());\n    const { match } = getState();\n    for (let i = 0; i <= match.all.length - 1; i++) {\n      const id = match.all[i];\n      dispatch(lightenPad({ id }));\n      await sleep(SONG_DELAY_TIME);\n      dispatch(lightenOffPad());\n      await sleep(SONG_DELAY_TIME);\n    }\n\n    dispatch(finishSong());\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nconst guess = ({ succeeded, id }) => async (dispatch, getState) => {\n  try {\n    dispatch(guessColor({ succeeded, id }));\n    dispatch(startSong());\n    dispatch(lightenPad({ id }));\n    await sleep(REDUCED_DELAY_TIME);\n    dispatch(lightenOffPad());\n    await sleep(REDUCED_DELAY_TIME);\n    dispatch(finishSong());\n\n    const { match } = getState();\n    const { all, guessed } = match;\n    const done = all.length === guessed.length && succeeded;\n\n    return new Promise((r) => r({ done }));\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const actionCreators = {\n  startSong,\n  startGame,\n  finishSong,\n  lightenPad,\n  lightenOffPad,\n  nextLevel,\n  guessColor,\n  guess,\n  sing,\n};\n"]},"metadata":{},"sourceType":"module"}